<% content_for :stylesheets do %>
  <%= stylesheet_link_tag "lti_config" %>
<% end %>

<h3>LTI Configuration Settings</h3>

<%= form_with url: lti_config_update_config_path do |form| %>
    <div class="input-field">
        <%= form.url_field :iss, value: @lti_config_hash.nil? ?  "" : @lti_config_hash["iss"], required: true %>
        <%= form.label :iss, "iss URL" %>
        <span class="helper-text">Find issuer identifier from the LTI platform's documentation</span>
    </div>
    <div class="input-field">
      <%= form.text_field :developer_key, value: @lti_config_hash.nil? ? "" : @lti_config_hash["developer_key"], required: true  %>
      <%= form.label :developer_key, "Developer Key"%>
      <span class="ÏÏelper-text">also known as client_id, obtained from the LTI platform</span>
    </div>
    <div class="input-field">
        <%= form.url_field :auth_url, value: @lti_config_hash.nil? ? "" : @lti_config_hash["auth_url"], required: true %>
        <%= form.label :auth_url, "LTI Launch Auth URL" %>
        <span class="helper-text"> LTI Platform's Launch Authentication URL, obtained from the platform </span>
    </div>
    <div class="input-field">
        <%= form.url_field :platform_public_jwks, value: @lti_config_hash.nil? ? "" : @lti_config_hash["platform_public_jwks"], required: true %>
        <%= form.label :platform_public_jwks, "LTI platform public JWK URL" %>
        <span class="helper-text"> LTI platform endpoint URL to obtain JWKs </span>
    </div>
    <div class="input-field">
      <%= form.url_field :oauth2_access_token_url, value: @lti_config_hash.nil? ? "" : @lti_config_hash["oauth2_access_token_url"], required: true %>
      <%= form.label :oauth2_access_token_url, "Platform OAuth2 Endpoint" %>
      <span class="helper-text"> LTI platform's Oauth2 Access Token Endpoint URL </span>
    </div>
    <div class="lti-upload-container">
      <h5>
        Upload Autolab's JWK as a JSON file
      </h5>
      <%= form.file_field :tool_jwk, accept:'text/json', required: true %>
    </div>
    <%= form.submit "Update Configuration", {:class=>"btn primary"}%>
<% end %>
